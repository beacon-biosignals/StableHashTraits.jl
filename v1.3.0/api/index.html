<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>API · StableHashTraits.jl</title><meta name="title" content="API · StableHashTraits.jl"/><meta property="og:title" content="API · StableHashTraits.jl"/><meta property="twitter:title" content="API · StableHashTraits.jl"/><meta name="description" content="Documentation for StableHashTraits.jl."/><meta property="og:description" content="Documentation for StableHashTraits.jl."/><meta property="twitter:description" content="Documentation for StableHashTraits.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">StableHashTraits.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Manual</a></li><li class="is-active"><a class="tocitem" href>API</a></li><li><a class="tocitem" href="../deprecated/">Deprecated</a></li><li><a class="tocitem" href="../internal/">Internal Functions</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>API</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>API</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/beacon-biosignals/StableHashTraits.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/main/docs/src/api.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="API"><a class="docs-heading-anchor" href="#API">API</a><a id="API-1"></a><a class="docs-heading-anchor-permalink" href="#API" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StableHashTraits.stable_hash" href="#StableHashTraits.stable_hash"><code>StableHashTraits.stable_hash</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">stable_hash(x, context=HashVersion{1}(); alg=sha256)
stable_hash(x; alg=sha256, version=1)</code></pre><p>Create a stable hash of the given objects. As long as the context remains the same, this hash is intended to remain unchanged across julia versions. The built-in context is HashVersion{N}, and if you specify a <code>version</code>, this is equivalent to explicitly passing <code>HashVersion{version}</code>. To customize how the hash is copmuted see <a href="../#Using-Contexts">Using Contexts</a>.</p><p>It is best to pass an explicit version, since <code>HashVersion{4}</code> is the only non-deprecated version; it is much faster than 1 and more stable than 2. Furthermore, a new hash version is provided in a future release, the hash you get by passing an explicit <code>HashVersion{N}</code> should <em>not</em> change. (Note that the number in <code>HashVersion</code> does not necessarily match the package version of <code>StableHashTraits</code>).</p><p>In hash version 4, you customize how hashes are computed using <a href="#StableHashTraits.transformer"><code>transformer</code></a>, and in versions 1-4 using <a href="../deprecated/#StableHashTraits.hash_method"><code>hash_method</code></a>.</p><p>To change the hash algorithm used, pass a different function to <code>alg</code>. It accepts any <code>sha</code> related function from <code>SHA</code> or any function of the form <code>hash(x::AbstractArray{UInt8}, [old_hash])</code>.</p><p>The <code>context</code> value gets passed as the second argument to <a href="../deprecated/#StableHashTraits.hash_method"><code>hash_method</code></a> and <a href="#StableHashTraits.transformer"><code>transformer</code></a>, and as the third argument to <a href="../deprecated/#StableHashTraits.write"><code>StableHashTraits.write</code></a>. Note that both <code>hash_method</code> and <code>StableHashTraits.write</code> are deprecated.</p><p><strong>See Also</strong></p><p><a href="#StableHashTraits.transformer"><code>transformer</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/99468cab31b1f517b1508598237df29ae9cfcd27/src/main_interface.jl#L21-L50">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StableHashTraits.HashVersion" href="#StableHashTraits.HashVersion"><code>StableHashTraits.HashVersion</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">HashVersion{V}()</code></pre><p>The default <code>hash_context</code> used by <code>stable_hash</code>. There are currently four versions (1-4). Version 4 should be favored when at all possible. Version 1 is the default version, so as to avoid changing the hash computed by existing code.</p><p>By explicitly passing this hash version in <code>stable_hash</code> you ensure that hash values for these fallback methods will not change even if new hash versions are developed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/99468cab31b1f517b1508598237df29ae9cfcd27/src/main_interface.jl#L1-L10">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StableHashTraits.transformer" href="#StableHashTraits.transformer"><code>StableHashTraits.transformer</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">StableHashTraits.transformer(::Type{T}, [context]) where {T}</code></pre><p>Return <a href="#StableHashTraits.Transformer"><code>Transformer</code></a> indicating how to modify an object of type <code>T</code> before hashing it. Methods with a <code>context</code> are called first, and if no method for that type exists there is a fallback that calls the method without a <code>context</code>. Users can therefore implement a method with a context object to customize transformations for that context only, or a single argument method when they wish to affect the transformation across all contexts that don&#39;t have a context specific method.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/99468cab31b1f517b1508598237df29ae9cfcd27/src/main_interface.jl#L130-L139">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StableHashTraits.Transformer" href="#StableHashTraits.Transformer"><code>StableHashTraits.Transformer</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">StableHashTraits.Transformer(fn=identity, result_method=nothing;
                             hoist_type=StableHashTraits.hoist_type(fn))</code></pre><p>Wraps the function used to transform values before they are hashed. The function is applied (<code>fn(x)</code>), and then its result is hashed according to the trait <code>@something result_method StructType(fn(x))</code>.</p><p>The flag <code>hoist_type</code> indicates if it is safe to hoist type hashes outside of loops. If set to true your has will be computed more quickly. However, this hoisting is only valid when the pre-transformed type is sufficient to disambiguate the hashed values that are produced downstream AND when the post-transformed types that are concrete depend only on pre-transformed types that are themselves concrete.</p><div class="admonition is-danger"><header class="admonition-header">Use `hoist_type=true` with care</header><div class="admonition-body"><p>It is easy to introduce subtle bugs that occur in rare edge cases when using <code>hoist_type=true</code>. Refer to <a href="../#Optimizing-Custom-Transformers">Optimizing Custom Transformers</a> for a detailed discussion and examples of when you can safely set <code>hoist_type=true</code>. It is better to use a pre-defined function such as <a href="#StableHashTraits.pick_fields"><code>pick_fields</code></a> or <a href="#StableHashTraits.omit_fields"><code>omit_fields</code></a>.</p></div></div><p><strong>See Also</strong></p><p><a href="#StableHashTraits.transformer"><code>transformer</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/99468cab31b1f517b1508598237df29ae9cfcd27/src/main_interface.jl#L82-L105">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StableHashTraits.pick_fields" href="#StableHashTraits.pick_fields"><code>StableHashTraits.pick_fields</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">pick_fields(x, fields::Symbol...)
pick_fields(x, fields::NTuple{&lt;:Any, Symbol})
pick_fields(fields::Symbol...)
pick_fields(fields::NTuple{&lt;:Any, Symbol})</code></pre><p>Return an object including <code>fields</code> from the fields of <code>x</code>, as per <code>getfield</code>. Curried versions exist, which return a function for selecting the given fields.</p><p>This function differs from returning a named tuple of fields (e.g. <code>x -&gt; (;x.a, x.b)</code>) in that it does not narrow the types of the returned fields. A field of type <code>Any</code> of <code>x</code> is a field of type <code>Any</code> in the returned value. This ensures that pick<em>fields can be safely used with `hoist</em>type<code>of [</code>Transformer`](@ref).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/99468cab31b1f517b1508598237df29ae9cfcd27/src/main_interface.jl#L151-L161">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StableHashTraits.omit_fields" href="#StableHashTraits.omit_fields"><code>StableHashTraits.omit_fields</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">omit_fields(x, fields::Symbol...)
omit_fields(x, fields::NTuple{&lt;:Any, Symbol})
omit_fields(fields::Symbol...)
omit_fields(fields::NTuple{&lt;:Any, Symbol})</code></pre><p>Return an object excluding <code>fields</code> from the fields of <code>x</code>, as per <code>getfield</code>. Curried versions exist, which return a function for selecting the given fields.</p><p>This function differs from returning a named tuple of fields (e.g. <code>x -&gt; (;x.a, x.b)</code>) in that it does not narrow the types of the returned fields. A field of type <code>Any</code> of <code>x</code> is a field of type <code>Any</code> in the returned value. This ensures that pick<em>fields can be safely used with `hoist</em>type<code>of [</code>Transformer`](@ref).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/99468cab31b1f517b1508598237df29ae9cfcd27/src/main_interface.jl#L176-L186">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StableHashTraits.TransformIdentity" href="#StableHashTraits.TransformIdentity"><code>StableHashTraits.TransformIdentity</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">StableHashTraits.TransformIdentity(x)</code></pre><p>Signal that the type <code>x</code> should not be transformed in the usual way, but by hashing <code>x</code> directly. This is useful when you want to hash both <code>x</code> the way it would normally be hashed without a specialized method of <a href="#StableHashTraits.transformer"><code>transformer</code></a> along with some metadata. Without this wrapper, returning <code>(metadata(x), x)</code> from the transforming function would cause an infinite regress (adding <code>metadata(x)</code> upon each call).</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">struct MyArray &lt;: AbstractVector{Int}
    data::Vector{Int}
    meta::Dict{String, String}
end
# other array methods go here...
function StableHashTraits.transformer(::Type{&lt;:MyArray})
    return Transformer(x -&gt; (x.meta, TransformIdentity(x)); hoist_type=true)
end</code></pre><p>In this example we hash both some metadata about a custom array, and each of the elements of <code>x</code></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/99468cab31b1f517b1508598237df29ae9cfcd27/src/main_interface.jl#L202-L226">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StableHashTraits.hoist_type" href="#StableHashTraits.hoist_type"><code>StableHashTraits.hoist_type</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">StableHashTraits.hoist_type(fn)</code></pre><p>Returns true if it is known that <code>fn</code> preservess type structure ala <a href="#StableHashTraits.Transformer"><code>Transformer</code></a>. See <a href="../#Optimizing-Custom-Transformers">Optimizing Custom Transformers</a> for details. This is false by default for all functions but <code>identity</code> and <a href="#StableHashTraits.module_nameof_string"><code>module_nameof_string</code></a>. You can define a method of this function for your own fn&#39;s to signal that their results can be safely optimized via hoisting the type hash outside of loops.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/99468cab31b1f517b1508598237df29ae9cfcd27/src/main_interface.jl#L117-L125">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StableHashTraits.transform_type" href="#StableHashTraits.transform_type"><code>StableHashTraits.transform_type</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>transform_type(::Type{T}, [context])</p><p>The value to hash for type <code>T</code> when hashing an object&#39;s type. Users of <code>StableHashTraits</code> can implement a method that accepts one (<code>T</code>) or two arguments (<code>T</code> and <code>context</code>). If no method is implemented, the fallback <code>transform_type</code> value uses <code>StructType(T)</code> to decide how to hash <code>T</code>; this is documented under <a href="../#What-gets-hashed?-(hash-version-4)">What gets hashed? (hash version 4)</a>.</p><p>Any types returned by <code>transform_type</code> has <code>transform_type</code> applied to it, so make sure that you only return types when they are are some nested component of your type (do not return <code>T</code>!!)</p><p>This method is used to add additional data to the hash of a type. Internally, the data listed below is always added, outside of the call to <code>transform_type</code>:</p><ul><li><code>fieldtypes(T)</code> of any <code>StructType.DataType</code> (e.g. StructType.Struct)</li><li><code>eltype(T)</code> of any <code>StructType.ArrayType</code> or <code>StructType.DictType</code> or <code>AbstractRange</code></li></ul><p>These components of the type need not be returned by <code>transform_type</code> and you cannot prevent them from being included in a type&#39;s hash, since otherwise the assumptions necessary for efficient hash computation would be violated.</p><p><strong>Examples</strong></p><p><strong>Singleton Types</strong></p><p>You can opt in to hashing novel singleton types by overwriting <code>transform_type</code>:</p><pre><code class="language-julia hljs">struct MySingleton end
StructTypes.StructType(::MySingleton) = StructTypes.SingletonType()
function StableHashTraits.transform_type(::Type{&lt;:MySingleton})
    return &quot;MySingleton&quot;
end</code></pre><p>If you do not own the type you wish to customize, you can use a context:</p><pre><code class="language-julia hljs">using AnotherPackage: PackageSingleton
StableHashTriats.@context HashAnotherSingleton
function StableHashTraits.transform_type(::Type{&lt;:PackageSingleton}, ::HashAnotherSingleton)
    return &quot;AnotherPackage.PackageSingleton&quot;
end
context = HashAnotherSingleton(HashVersion{4}())
stable_hash([PackageSingleton(), 1, 2], context) # will not error</code></pre><p><strong>Functions</strong></p><p>Overwriting <code>transform_type</code> can be used to opt-in to hashing functions.</p><pre><code class="language-julia hljs">f(x) = x+1
StableHashTraits.transform_type(::typeof(fn)) = &quot;Main.fn&quot;</code></pre><p><strong>Type Parameters</strong></p><p>To include additional type parameters in a type&#39;s hash, you can overwrite <code>transform_type</code></p><pre><code class="language-julia hljs">struct MyStruct{T,K}
    wrapped::T
end

function StableHashTraits.transform_type(::Type{&lt;:MyStruct{T,K}})
    return &quot;MyStruct&quot;, K
end</code></pre><p>By adding this method for <code>type_structure</code> both <code>K</code> and <code>T</code> will impact the hash, <code>T</code> because it is included in <code>fieldtypes(&lt;:MyStruct)</code> and <code>K</code> because it is included in <code>type_structure(&lt;:MyStruct)</code>.</p><p>If you do not own the type you want to customize, you can specialize <code>type_structure</code> using a specific hash context.</p><pre><code class="language-julia hljs">using Intervals

StableHashTraits.@context IntervalEndpointsMatter

function HashTraits.type_structure(::Type{&lt;:I}, ::IntervalEndpointsMatter) where {T, L, R, I&lt;:Interval{T, L, R}}
    return (L, R)
end

context = IntervalEndpointsMatter(HashVersion{4}())
stable_hash(Interval{Closed, Open}(1, 2), context) !=
    stable_hash(Interval{Open, Closed}(1, 2), context) # true</code></pre><p><strong>See Also</strong></p><p><a href="#StableHashTraits.transformer"><code>transformer</code></a> <a href="#StableHashTraits.@context"><code>@context</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/99468cab31b1f517b1508598237df29ae9cfcd27/src/main_interface.jl#L383-L477">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StableHashTraits.transform_type_value" href="#StableHashTraits.transform_type_value"><code>StableHashTraits.transform_type_value</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">transform_type_value(::Type{T}, [trait], [context]) where {T}</code></pre><p>The value that is hashed for type <code>T</code> when hashing a type as a value (e.g. <code>stable_hash(Int)</code>). Hashing types as values is an error by default, but you can use this method to opt-in to hashing a type as a value. You can return types (e.g. type parameters of <code>T</code>), but do not return <code>T</code> or you will get a stack overflow.</p><p><strong>Example</strong></p><p>You can define a method of this function to opt in to hashing your type as a value.</p><pre><code class="language-julia hljs">struct MyType end
StableHashTraits.transform_type_value(::Type{T}) where {T&lt;:MyType} = module_nameof_string(T)
stable_hash(MyType) # does not error</code></pre><p>Likewise, you can opt in to this behavior for a type you don&#39;t own by defining a context.</p><pre><code class="language-julia hljs">StableHashTraits.@context HashNumberTypes
function StableHashTraits.type_value_identifier(::Type{T},
                                                ::HashNumberTypes) where {T &lt;: Number}
    return module_nameof_string(T)
end
stable_hash(Int, HashNumberTypes(HashVersion{4}())) # does not error</code></pre><p><strong>See Also</strong></p><p><a href="#StableHashTraits.transformer"><code>transformer</code></a> <a href="#StableHashTraits.transform_type"><code>StableHashTraits.transform_type</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/99468cab31b1f517b1508598237df29ae9cfcd27/src/main_interface.jl#L488-L522">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StableHashTraits.nameof_string" href="#StableHashTraits.nameof_string"><code>StableHashTraits.nameof_string</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">nameof_string(::Type{T})
nameof_string(T::Module)
nameof_string(::T) where {T}</code></pre><p>Get a stable name of <code>T</code>. This is a helpful utility for writing your own methods of <a href="#StableHashTraits.transform_type"><code>StableHashTraits.transform_type</code></a> and <a href="#StableHashTraits.transform_type_value"><code>StableHashTraits.transform_type_value</code></a>. The stable name is computed from <code>nameof</code>. Anonymous names (e.g. <code>module_nameof_string(x -&gt; x+1)</code>) throw an error, as no stable name is possible in this case.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/99468cab31b1f517b1508598237df29ae9cfcd27/src/main_interface.jl#L361-L371">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StableHashTraits.module_nameof_string" href="#StableHashTraits.module_nameof_string"><code>StableHashTraits.module_nameof_string</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">module_nameof_string(::Type{T})
module_nameof_string(T::Module)
module_nameof_string(::T) where {T}</code></pre><p>Get a (mostly!) stable name of <code>T</code>. This is a helpful utility for writing your own methods of <a href="#StableHashTraits.transform_type"><code>StableHashTraits.transform_type</code></a> and <a href="#StableHashTraits.transform_type_value"><code>StableHashTraits.transform_type_value</code></a>. The stable name includes the name of the module that <code>T</code> was defined in. Any uses of <code>Core</code> are replaced with <code>Base</code> to keep the name stable across versions of julia. Anonymous names (e.g. <code>module_nameof_string(x -&gt; x+1)</code>) throw an error, as no stable name is possible in this case.</p><div class="admonition is-danger"><header class="admonition-header">A type&#39;s module often changes</header><div class="admonition-body"><p>The module of many types are considered an implementation detail and can change between non-breaking versions of a package. For this reason uses of <code>module_nameof_string</code> must be explicitly specified by user of <code>StableHashTraits</code>. This function is not used internally hor <code>HashVersion{4}</code> for types that are not defined in <code>StableHashTraits</code>.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/99468cab31b1f517b1508598237df29ae9cfcd27/src/main_interface.jl#L283-L301">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StableHashTraits.is_ordered" href="#StableHashTraits.is_ordered"><code>StableHashTraits.is_ordered</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">is_ordered(x)</code></pre><p>Indicates whether the order of the elements of object <code>x</code> are important to its hashed value. If false, <code>x</code>&#39;s elements will first be <code>collect</code>ed and <code>sort</code>&#39;ed before hashing them. When calling <code>sort</code>, <a href="#StableHashTraits.hash_sort_by"><code>hash_sort_by</code></a> is passed as the <code>by</code> keyword argument. If <code>x</code> is a <code>DictType</code>, the elements are sorted by their keys rather than their elements.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/99468cab31b1f517b1508598237df29ae9cfcd27/src/transformer_traits.jl#L215-L222">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StableHashTraits.hash_sort_by" href="#StableHashTraits.hash_sort_by"><code>StableHashTraits.hash_sort_by</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">`hash_sort_by(x)`</code></pre><p>Defines how the elements of a hashed container <code>x</code> are <code>sort</code>ed if <a href="#StableHashTraits.is_ordered"><code>is_ordered</code></a> of <code>x</code> returns <code>false</code>. The return value of this function is passed to <code>sort</code> as the <code>by</code> keyword.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/99468cab31b1f517b1508598237df29ae9cfcd27/src/transformer_traits.jl#L226-L232">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StableHashTraits.parent_context" href="#StableHashTraits.parent_context"><code>StableHashTraits.parent_context</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">StableHashTraits.parent_context(context)</code></pre><p>Return the parent context of the given context object. (See <a href="../deprecated/#StableHashTraits.hash_method"><code>hash_method</code></a> and <a href="#StableHashTraits.@context"><code>StableHashTraits.@context</code></a> for details of using context). The default method falls back to returning <code>HashVersion{1}</code>, but this is flagged as a deprecation warning; in the future it is expected that all contexts define this method.</p><p>This is normally all that you need to know to implement a new context. However, if your context is expected to be the root context—one that does not fallback to any parent (akin to <code>HashVersion</code>)—then there may be a bit more work involved. In this case, <code>parent_context</code> should return <code>nothing</code>. You will also need to define <a href="#StableHashTraits.root_version"><code>StableHashTraits.root_version</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/99468cab31b1f517b1508598237df29ae9cfcd27/src/main_interface.jl#L62-L75">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StableHashTraits.@context" href="#StableHashTraits.@context"><code>StableHashTraits.@context</code></a> — <span class="docstring-category">Macro</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">StableHashTraits.@context MyContext</code></pre><p>Shorthand for declaring a hash context.</p><p>Contexts are used to customize the behavior of a hash for a type you don&#39;t own, by passing the context as the second argument to <code>stable_hash</code>, and specializing methods of <a href="#StableHashTraits.transformer"><code>transformer</code></a> or <a href="#StableHashTraits.transform_type"><code>StableHashTraits.transform_type</code></a> on your context (see example below).</p><p>The clause <code>@context MyContext</code> is re-written to:</p><pre><code class="language-julia hljs">struct MyContext{T}
    parent::T
end
StableHashTraits.parent_context(x::MyContext) = x.parent</code></pre><p>The parent context is typically another custom context, or the root context <code>HashVersion{4}()</code>.</p><p><strong>Example</strong></p><pre><code class="language-julia hljs">StableHashTraits.@context NumberAbs
transformer(::Type{&lt;:Number}, ::NumberAbs) = Transformer(abs; hoist_type=true)
stable_hash(10, NumberAbs(HashVersion{4}())) == stable_hash(-10, NumberAbs(HashVersion{4}()))</code></pre><p><strong>See Also</strong></p><ul><li><a href="#StableHashTraits.parent_context"><code>parent_context</code></a></li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/99468cab31b1f517b1508598237df29ae9cfcd27/src/main_interface.jl#L241-L273">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StableHashTraits.root_version" href="#StableHashTraits.root_version"><code>StableHashTraits.root_version</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">StableHashTraits.root_version(context)</code></pre><p>Return the version of the root context: an integer in the range (1, 2). The default fallback method value returns 1.</p><p>In almost all cases, a root hash context should return 2. The optimizations used in HashVersion{2} include a number of changes to the hash-trait implementations that do not alter the documented behavior but do change the actual hash value returned because of how and when elements get hashed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/99468cab31b1f517b1508598237df29ae9cfcd27/src/hash_traits.jl#L488-L499">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StableHashTraits.WithTypeNames" href="#StableHashTraits.WithTypeNames"><code>StableHashTraits.WithTypeNames</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">WithTypeNames(parent_context)</code></pre><p>In this hash context, <a href="#StableHashTraits.transform_type"><code>StableHashTraits.transform_type</code></a> returns <a href="#StableHashTraits.module_nameof_string"><code>module_nameof_string</code></a> for all types, in contrast to the default behavior (which mostly uses <code>nameof_string(StructType(T))</code>).</p><div class="admonition is-category-warn"><header class="admonition-header">Unstable</header><div class="admonition-body"><p><code>module_nameof_string</code>&#39;s return value can change with non-breaking changes if e.g. the module of a function or type is changed because it&#39;s considered an implementation detail of a package.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/99468cab31b1f517b1508598237df29ae9cfcd27/src/special_contexts.jl#L6-L18">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StableHashTraits.TablesEq" href="#StableHashTraits.TablesEq"><code>StableHashTraits.TablesEq</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">TablesEq(parent_context)</code></pre><p>In this hash context the type and structure of a table do not impact the hash that is created, only the set of columns (as determined by <code>Tables.columns</code>), and the hash of the individual columns matter.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/99468cab31b1f517b1508598237df29ae9cfcd27/src/special_contexts.jl#L37-L43">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="StableHashTraits.ViewsEq" href="#StableHashTraits.ViewsEq"><code>StableHashTraits.ViewsEq</code></a> — <span class="docstring-category">Type</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">ViewsEq(parent_context)</code></pre><p>Create a hash context where only the contents of an array or string determine its hash: that is, the type of the array or string (e.g. <code>SubString</code> vs. <code>String</code>) does not impact the hash value.</p><div class="admonition is-category-warn"><header class="admonition-header">Deprecated</header><div class="admonition-body"><p>In HashVersion{4} this is already true, so there is no need for <code>ViewsEq</code>. This does not change the behavior of <code>HashVersion{4}</code> or later.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/beacon-biosignals/StableHashTraits.jl/blob/99468cab31b1f517b1508598237df29ae9cfcd27/src/special_contexts.jl#L71-L81">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Manual</a><a class="docs-footer-nextpage" href="../deprecated/">Deprecated »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Friday 27 September 2024 14:17">Friday 27 September 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
